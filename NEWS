                     User-Visible rra-c-util Changes

rra-c-util 1.1 (unreleased)

    If krb5-config produces results that don't work for Kerberos v5 of
    GSS-API probes, fall back on manual library probing rather than just
    failing.  This fixes problems with GSS-API probes on Solaris where
    krb5-config is present but doesn't know about GSS-API.  Thanks to Andy
    Cobaugh for the report.

    Suppress error output from krb5-config in Kerberos v5 and GSS-API
    probes so that it's not mixed in with configure output.

    Do not try to use a non-executable krb5-config for GSS-API probes and
    prefer the KRB5_CONFIG environment variable over a path constructed
    from the --with-gssapi argument.

    Add m4/socket-unix.m4, which contains some probes for UNIX domain
    socket support taken from INN with modifications by Julien Ã‰LIE.

    Enable GCC format string checking for the replacement asprintf
    function.

    Use AS_HELP_STRING instead of the deprecated AC_HELP_STRING in all
    Autoconf m4 files.

    Fix network test suite failures when IPv6 is available but disabled
    in the kernel.

rra-c-util 1.0 (2009-05-22)

    Initial public release based on the portability code that shipped with
    remctl 2.13 with some additional files from other current releases of
    my software packages.  The changes below are relative to that version.

    Separate out the message functions that call exit to a separate source
    file and therefore a separate object file.  This will mean that shared
    libraries that don't call die won't link this file and hence won't
    include a reference to exit, which will avoid errors from some package
    test tools.

    Add a vector_addn function that adds a counted string to a vector
    (similar to strndup).  There is no cvector equivalent.

    On BSD/OS, despite the AI_ADDRCONFIG flag being present in the system
    headers, passing it into getaddrinfo results in an error.  Test for
    this at configure time and, if it doesn't work, hide the system
    AI_ADDRCONFIG definition.

    Remove RRA_LIB_*_SET functions.  When using Automake, one should never
    put one's own flags into the CPPFLAGS, CFLAGS, and LDFLAGS variables,
    since the user may override them.  Instead, AM_* versions should be
    set in Makefile.am.  This can be done using the existing substitution
    variables, so the *_SET functions were always wrong.

    Declare message_fatal_cleanup extern in util.h.  Fixes compilation
    problems on Mac OS X and probably elsewhere.

    Update GSS-API probes for portability to Solaris 10's native generic
    GSS-API libraries.  Thanks, Peter Eriksson.

    Change from AC_TRY_* to AC_*_IFELSE for all Autoconf macros.

    Update the example configure.ac for Autoconf 2.63, adding
    AC_CONFIG_MACRO_DIR and using AC_USE_SYSTEM_EXTENSIONS instead of
    AC_AIX and AC_GNU_SOURCE.

    Specify a mode when creating a sentinel in the daemon test.  This
    fixes compiler warnings with newer gcc.

    Updated test suite to the current version of C TAP Harness and its C
    TAP library.  Rewrite the extra functions that were in libtest as
    add-ons to the TAP library.

    Add a TAP test library Kerberos initialization function to use the
    native Kerberos library functions as well as a version that calls
    kinit.  The former will be more useful for packages that already
    depend on the Kerberos libraries.

    Add TAP test library functions to clean up the Kerberos ticket cache
    and to cleanly shut down remctld.

    Add TAP shell libraries for initializing Kerberos and starting and
    stopping remctld.

    Make the xmalloc test suite robust against builddir != srcdir builds
    that change the default file name of the test program.
